<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChapÃ©u Seletor - Folclore Brasileiro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #0f0520, #1a0b2e, #2d1b69, #0f0520);
            background-size: 400% 400%;
            animation: mysticalGradient 10s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            color: #e6d7ff;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(2px 2px at 20px 30px, #fff, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
                radial-gradient(2px 2px at 160px 30px, #fff, transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: twinkle 4s linear infinite;
            pointer-events: none;
            opacity: 0.6;
        }

        @keyframes mysticalGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .container {
            text-align: center;
            max-width: 800px;
            padding: 20px;
            position: relative;
        }

        .title {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(138, 43, 226, 0.8), 0 0 40px rgba(75, 0, 130, 0.6);
            background: linear-gradient(45deg, #9370db, #e6d7ff, #dda0dd, #ba55d3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: mysticShimmer 3s ease-in-out infinite alternate;
        }

        @keyframes mysticShimmer {
            0% { 
                filter: brightness(1) hue-rotate(0deg);
                text-shadow: 0 0 20px rgba(138, 43, 226, 0.8), 0 0 40px rgba(75, 0, 130, 0.6);
            }
            100% { 
                filter: brightness(1.4) hue-rotate(20deg);
                text-shadow: 0 0 30px rgba(186, 85, 211, 0.9), 0 0 60px rgba(138, 43, 226, 0.7);
            }
        }

        .subtitle {
            font-size: 1.2em;
            margin-bottom: 40px;
            opacity: 0.9;
            font-style: italic;
        }

        .hat-container {
            position: relative;
            margin: 40px 0;
        }

        .hat {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            cursor: pointer;
            position: relative;
            transition: transform 0.3s ease;
        }

        .hat:hover {
            transform: scale(1.05);
        }

        .hat svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 20px rgba(147, 112, 219, 0.6)) drop-shadow(0 0 40px rgba(138, 43, 226, 0.3));
        }

        .hat.thinking {
            animation: hatThinking 0.5s ease-in-out infinite;
        }

        @keyframes hatThinking {
            0%, 100% { 
                transform: rotate(-3deg) scale(1);
                filter: drop-shadow(0 0 25px rgba(147, 112, 219, 0.8)) drop-shadow(0 0 50px rgba(138, 43, 226, 0.5));
            }
            25% { 
                transform: rotate(2deg) scale(1.03);
                filter: drop-shadow(0 0 30px rgba(186, 85, 211, 0.9)) drop-shadow(0 0 60px rgba(147, 112, 219, 0.6));
            }
            50% { 
                transform: rotate(3deg) scale(0.97);
                filter: drop-shadow(0 0 35px rgba(218, 160, 221, 0.8)) drop-shadow(0 0 70px rgba(186, 85, 211, 0.5));
            }
            75% { 
                transform: rotate(-1deg) scale(1.02);
                filter: drop-shadow(0 0 28px rgba(147, 112, 219, 0.7)) drop-shadow(0 0 55px rgba(138, 43, 226, 0.4));
            }
        }

        .floating-text {
            position: absolute;
            font-size: 1.5em;
            font-weight: bold;
            pointer-events: none;
            opacity: 0;
            text-shadow: 0 0 10px rgba(147, 112, 219, 0.8), 0 0 20px rgba(138, 43, 226, 0.6);
            z-index: 10;
            background: linear-gradient(45deg, #9370db, #dda0dd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .floating-text.animate {
            animation: floatUp 2s ease-out forwards;
        }

        @keyframes floatUp {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.8);
            }
            20% {
                opacity: 1;
                transform: translateY(0px) scale(1);
            }
            80% {
                opacity: 1;
                transform: translateY(-30px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-50px) scale(0.8);
            }
        }

        .result {
            margin-top: 40px;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.8s ease;
        }

        .result.show {
            opacity: 1;
            transform: scale(1);
        }

        .tribe-name {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 0 0 15px currentColor, 0 0 30px currentColor;
        }

        .tribe-description {
            font-size: 1.3em;
            margin-bottom: 20px;
            line-height: 1.6;
            font-style: italic;
            text-shadow: 0 0 8px rgba(147, 112, 219, 0.5);
        }

        .tribe-characteristics {
            font-size: 1.1em;
            line-height: 1.5;
            background: rgba(15, 5, 32, 0.6);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid rgba(147, 112, 219, 0.4);
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.3), inset 0 0 20px rgba(147, 112, 219, 0.1);
        }

        .curupira { color: #32cd32; text-shadow: 0 0 15px #32cd32, 0 0 30px #228b22; }
        .saci { color: #ff6347; text-shadow: 0 0 15px #ff6347, 0 0 30px #ff4500; }
        .iara { color: #87ceeb; text-shadow: 0 0 15px #87ceeb, 0 0 30px #4682b4; }
        .boitata { color: #ffd700; text-shadow: 0 0 15px #ffd700, 0 0 30px #ffb347; }

        .reset-btn {
            margin-top: 30px;
            padding: 15px 30px;
            font-size: 1.2em;
            background: linear-gradient(45deg, #4b0082, #6a0dad, #8a2be2);
            color: #e6d7ff;
            border: 2px solid rgba(147, 112, 219, 0.5);
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.4), 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            font-family: 'Georgia', serif;
            text-shadow: 0 0 10px rgba(230, 215, 255, 0.8);
        }

        .reset-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px rgba(138, 43, 226, 0.6), 0 8px 25px rgba(0,0,0,0.4);
            background: linear-gradient(45deg, #6a0dad, #8a2be2, #9370db);
        }

        .stats {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(15, 5, 32, 0.8);
            padding: 15px;
            border-radius: 10px;
            font-size: 0.9em;
            border: 1px solid rgba(147, 112, 219, 0.4);
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.3);
            backdrop-filter: blur(10px);
        }

        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: linear-gradient(45deg, #9370db, #dda0dd);
            border-radius: 50%;
            animation: sparkle 3s linear infinite;
            box-shadow: 0 0 10px currentColor;
        }

        @keyframes sparkle {
            0% {
                opacity: 0;
                transform: translateY(0) rotate(0deg);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(-100vh) rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">ðŸŽ© ChapÃ©u Seletor ðŸŽ©</h1>
        <p class="subtitle">Descubra sua tribo do folclore brasileiro!</p>
        
        <div class="hat-container">
            <div class="hat" id="magicHat" onclick="selectTribe()">
                <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Sombra do chapÃ©u -->
                    <ellipse cx="100" cy="190" rx="45" ry="8" fill="#000033" opacity="0.6"/>
                    
                    <!-- Aba do chapÃ©u -->
                    <ellipse cx="100" cy="170" rx="75" ry="12" fill="url(#hatBrimGradient)"/>
                    
                    <!-- Cone do chapÃ©u -->
                    <path d="M 70 170 Q 85 60, 100 40 Q 115 60, 130 170 Z" fill="url(#hatBodyGradient)"/>
                    
                    <!-- Detalhes decorativos -->
                    <rect x="85" y="160" width="30" height="8" rx="4" fill="url(#bandGradient)"/>
                    
                    <!-- Estrelas no chapÃ©u -->
                    <g fill="#ffd700" opacity="0.9">
                        <polygon points="90,120 92,125 97,125 93,129 95,134 90,131 85,134 87,129 83,125 88,125" />
                        <polygon points="105,90 106,93 109,93 107,95 108,98 105,96 102,98 103,95 101,93 104,93" />
                        <polygon points="115,130 116,132 118,132 117,134 118,136 115,135 112,136 113,134 112,132 114,132" />
                    </g>
                    
                    <!-- Lua crescente -->
                    <path d="M 75 100 Q 85 95, 85 110 Q 78 105, 75 100" fill="#e6e6fa" opacity="0.8"/>
                    
                    <!-- Brilho mÃ¡gico principal -->
                    <circle cx="100" cy="80" r="3" fill="#9370db" opacity="0.9">
                        <animate attributeName="opacity" values="0.4;1;0.4" dur="2s" repeatCount="indefinite"/>
                        <animate attributeName="r" values="2;4;2" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    
                    <!-- Brilhos secundÃ¡rios -->
                    <circle cx="110" cy="110" r="2" fill="#dda0dd" opacity="0.7">
                        <animate attributeName="opacity" values="0.3;0.9;0.3" dur="1.8s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="95" cy="140" r="1.5" fill="#ba55d3" opacity="0.6">
                        <animate attributeName="opacity" values="0.2;0.8;0.2" dur="2.2s" repeatCount="indefinite"/>
                    </circle>
                    
                    <!-- PartÃ­culas flutuantes -->
                    <circle cx="120" cy="70" r="1" fill="#e6d7ff">
                        <animateTransform attributeName="transform" type="translate" 
                                        values="0,0; 5,-10; -3,-20; 2,-30" dur="4s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="0;1;1;0" dur="4s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="80" cy="85" r="0.8" fill="#9370db">
                        <animateTransform attributeName="transform" type="translate" 
                                        values="0,0; -3,-8; 4,-15; -2,-25" dur="3.5s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="0;1;1;0" dur="3.5s" repeatCount="indefinite"/>
                    </circle>
                    
                    <!-- Gradientes -->
                    <defs>
                        <linearGradient id="hatBodyGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#2d1b69;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#1a0b2e;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#0f0520;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="hatBrimGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#1a0b2e;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#0f0520;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="bandGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#9370db;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#ba55d3;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            
            <div class="particles" id="particles"></div>
        </div>

        <div class="result" id="result">
            <div class="tribe-name" id="tribeName"></div>
            <div class="tribe-description" id="tribeDescription"></div>
            <div class="tribe-characteristics" id="tribeCharacteristics"></div>
            <button class="reset-btn" onclick="resetSelection()">ðŸŽ© Sortear Novamente</button>
        </div>
    </div>

    <div class="stats" id="stats">
        <div><strong>EstatÃ­sticas:</strong></div>
        <div id="statsContent"></div>
    </div>

    <script>
        const tribes = {
            curupira: {
                name: "Tribo do Curupira",
                color: "#228B22",
                description: "GuardiÃ£o da floresta, protetor da natureza e dos animais!",
                characteristics: "VocÃª Ã© corajoso, protetor e tem uma conexÃ£o especial com a natureza. Sempre defende os mais fracos e luta pela preservaÃ§Ã£o do meio ambiente. Seus pÃ©s para trÃ¡s confundem os inimigos, mas seu coraÃ§Ã£o aponta sempre para o bem!",
                words: ["Protetor", "Natureza", "GuardiÃ£o", "Floresta", "Coragem"]
            },
            saci: {
                name: "Tribo do Saci",
                color: "#FF4500",
                description: "Travesso, esperto e cheio de energia contagiante!",
                characteristics: "VocÃª Ã© brincalhÃ£o, inteligente e sempre encontra uma forma criativa de resolver problemas. Gosta de pregar peÃ§as inofensivas e tem um senso de humor Ãºnico. Sua energia Ã© contagiante e vocÃª consegue animar qualquer ambiente!",
                words: ["Travesso", "Esperto", "BrincalhÃ£o", "Energia", "Criativo"]
            },
            iara: {
                name: "Tribo da Iara",
                color: "#4682B4",
                description: "Sereia encantadora, sÃ¡bia e misteriosa das Ã¡guas!",
                characteristics: "VocÃª possui uma sabedoria profunda e uma beleza que vem de dentro. Ã‰ intuitivo, empÃ¡tico e tem uma conexÃ£o especial com as emoÃ§Ãµes. Sua voz tem o poder de acalmar e inspirar, e vocÃª Ã© um conselheiro natural para os outros.",
                words: ["SÃ¡bia", "Encantadora", "Misteriosa", "Intuitiva", "Inspiradora"]
            },
            boitata: {
                name: "Tribo do BoitatÃ¡",
                color: "#FFD700",
                description: "Serpente de fogo, guardiÃ£ dos campos e da justiÃ§a!",
                characteristics: "VocÃª Ã© justo, determinado e tem uma forÃ§a interior impressionante. Protege aqueles que nÃ£o podem se defender e luta contra as injustiÃ§as. Sua presenÃ§a ilumina os caminhos escuros e vocÃª Ã© uma fonte de esperanÃ§a para muitos.",
                words: ["Justo", "Protetor", "Determinado", "Iluminado", "EsperanÃ§a"]
            }
        };

        let tribeStats = {
            curupira: 0,
            saci: 0,
            iara: 0,
            boitata: 0
        };

        let isSelecting = false;

        // Carregar estatÃ­sticas salvas
        const savedStats = JSON.parse(localStorage.getItem('tribeStats') || '{"curupira":0,"saci":0,"iara":0,"boitata":0}');
        tribeStats = savedStats;
        updateStats();

        function selectTribe() {
            if (isSelecting) return;
            
            isSelecting = true;
            const hat = document.getElementById('magicHat');
            const result = document.getElementById('result');
            
            // Esconder resultado anterior
            result.classList.remove('show');
            
            // Animar chapÃ©u
            hat.classList.add('thinking');
            
            // Criar partÃ­culas
            createParticles();
            
            // Mostrar palavras flutuantes
            showFloatingWords();
            
            // ApÃ³s 3 segundos, mostrar resultado
            setTimeout(() => {
                const selectedTribe = getBalancedTribe();
                showResult(selectedTribe);
                hat.classList.remove('thinking');
                isSelecting = false;
            }, 3000);
        }

        function getBalancedTribe() {
            const total = Object.values(tribeStats).reduce((a, b) => a + b, 0);
            const tribeKeys = Object.keys(tribes);
            
            if (total === 0) {
                // Primeira seleÃ§Ã£o Ã© aleatÃ³ria
                return tribeKeys[Math.floor(Math.random() * tribeKeys.length)];
            }
            
            // Encontrar tribos com menor representaÃ§Ã£o
            const minCount = Math.min(...Object.values(tribeStats));
            const underrepresentedTribes = tribeKeys.filter(tribe => tribeStats[tribe] === minCount);
            
            // 70% de chance de selecionar uma tribo sub-representada
            if (Math.random() < 0.7 && underrepresentedTribes.length > 0) {
                return underrepresentedTribes[Math.floor(Math.random() * underrepresentedTribes.length)];
            } else {
                // 30% de chance de seleÃ§Ã£o completamente aleatÃ³ria
                return tribeKeys[Math.floor(Math.random() * tribeKeys.length)];
            }
        }

        function showFloatingWords() {
            const words = ["Analisando...", "Pensando...", "Curupira?", "Saci?", "Iara?", "BoitatÃ¡?", "Hmm...", "Quase lÃ¡...", "Decidindo..."];
            const container = document.querySelector('.hat-container');
            
            words.forEach((word, index) => {
                setTimeout(() => {
                    createFloatingText(word, container);
                }, index * 300);
            });
        }

        function createFloatingText(text, container) {
            const floatingText = document.createElement('div');
            floatingText.className = 'floating-text';
            floatingText.textContent = text;
            
            // PosiÃ§Ã£o aleatÃ³ria ao redor do chapÃ©u
            const angle = Math.random() * 2 * Math.PI;
            const distance = 120 + Math.random() * 100;
            const x = Math.cos(angle) * distance;
            const y = Math.sin(angle) * distance;
            
            floatingText.style.left = `calc(50% + ${x}px)`;
            floatingText.style.top = `calc(50% + ${y}px)`;
            floatingText.style.transform = 'translate(-50%, -50%)';
            
            container.appendChild(floatingText);
            
            // Animar
            setTimeout(() => {
                floatingText.classList.add('animate');
            }, 10);
            
            // Remover apÃ³s animaÃ§Ã£o
            setTimeout(() => {
                if (floatingText.parentNode) {
                    floatingText.parentNode.removeChild(floatingText);
                }
            }, 2000);
        }

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    particle.style.animationDuration = (2 + Math.random() * 2) + 's';
                    
                    particlesContainer.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 4000);
                }, i * 100);
            }
        }

        function showResult(tribeKey) {
            const tribe = tribes[tribeKey];
            const result = document.getElementById('result');
            const tribeName = document.getElementById('tribeName');
            const tribeDescription = document.getElementById('tribeDescription');
            const tribeCharacteristics = document.getElementById('tribeCharacteristics');
            
            // Atualizar estatÃ­sticas
            tribeStats[tribeKey]++;
            localStorage.setItem('tribeStats', JSON.stringify(tribeStats));
            updateStats();
            
            // Mostrar resultado
            tribeName.textContent = tribe.name;
            tribeName.style.color = tribe.color;
            tribeName.className = `tribe-name ${tribeKey}`;
            
            tribeDescription.textContent = tribe.description;
            tribeCharacteristics.textContent = tribe.characteristics;
            
            result.classList.add('show');
            
            // Mostrar palavras da tribo
            setTimeout(() => {
                showTribeWords(tribe.words);
            }, 500);
        }

        function showTribeWords(words) {
            const container = document.querySelector('.container');
            
            words.forEach((word, index) => {
                setTimeout(() => {
                    createFloatingText(word, container);
                }, index * 400);
            });
        }

        function resetSelection() {
            const result = document.getElementById('result');
            result.classList.remove('show');
        }

        function updateStats() {
            const statsContent = document.getElementById('statsContent');
            const total = Object.values(tribeStats).reduce((a, b) => a + b, 0);
            
            if (total === 0) {
                statsContent.innerHTML = '<div>Nenhuma seleÃ§Ã£o ainda</div>';
                return;
            }
            
            let statsHTML = '';
            Object.entries(tribeStats).forEach(([tribe, count]) => {
                const percentage = ((count / total) * 100).toFixed(1);
                const tribeName = tribes[tribe].name.replace('Tribo do ', '').replace('Tribo da ', '');
                statsHTML += `<div>${tribeName}: ${count} (${percentage}%)</div>`;
            });
            
            statsContent.innerHTML = statsHTML;
        }

        // Efeito de partÃ­culas contÃ­nuas no fundo
        setInterval(() => {
            if (!isSelecting && Math.random() < 0.15) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (5 + Math.random() * 5) + 's';
                particle.style.opacity = Math.random() * 0.6 + 0.2;
                
                // Cores mÃ­sticas variadas
                const colors = ['#9370db', '#dda0dd', '#ba55d3', '#e6d7ff', '#8a2be2'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                particle.style.background = color;
                particle.style.boxShadow = `0 0 10px ${color}`;
                
                document.getElementById('particles').appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 10000);
            }
        }, 1500);
    </script>
</body>
</html>
